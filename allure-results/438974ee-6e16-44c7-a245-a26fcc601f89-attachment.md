# Test info

- Name: Test Case 1: Register User >> should register, verify login, and delete user account
- Location: /Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/AutomationExercise/PlayWrightTypeScriptProjectUI/tests/testCase_1_registerUser.spec.ts:33:9

# Error details

```
Error: page.goto: Target page, context or browser has been closed
Call log:
  - navigating to "https://automationexercise.com/", waiting until "load"

    at HomePage.goto (/Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/AutomationExercise/PlayWrightTypeScriptProjectUI/pages/HomePage.ts:90:25)
    at /Users/asifuae1983/Desktop/AUTOMATION/PLAYWRIGHT/AutomationExercise/PlayWrightTypeScriptProjectUI/tests/testCase_1_registerUser.spec.ts:27:24
```

# Test source

```ts
   1 | import { expect, type Locator, type Page } from '@playwright/test';
   2 | import { Utils } from '../utils/utils';
   3 |
   4 | export class HomePage {
   5 |     private page: Page;
   6 |     readonly slider: Locator;
   7 |     readonly homeLink: Locator;
   8 |     readonly productsLink: Locator;
   9 |     readonly cartLink: Locator;
   10 |     readonly signupLoginLink: Locator;
   11 |     readonly testCasesLink: Locator;
   12 |     readonly apiTestingLink: Locator;
   13 |     readonly videoTutorialsLink: Locator;
   14 |     readonly contactUsLink: Locator;
   15 |     readonly subscriptionText: Locator;
   16 |     readonly subscriptionEmailInput: Locator;
   17 |     readonly subscriptionButton: Locator;
   18 |     readonly successAlert: Locator;
   19 |     readonly womenCategoryLink: Locator;
   20 |     readonly womenDressCategoryLink: Locator;
   21 |     readonly menCategoryLink: Locator;
   22 |     readonly menTshirtsCategoryLink: Locator;
   23 |     readonly categoryView: Locator;
   24 |     readonly recommendedItemsSection: Locator;
   25 |     readonly addedModal: Locator;
   26 |     readonly viewCartLinkInModal: Locator;
   27 |     readonly deleteAccountLink: Locator;
   28 |     readonly logoutLink: Locator;
   29 |     readonly accountDeletedText: Locator;
   30 |     readonly deleteContinueButton: Locator;
   31 |     readonly scrollUpArrowButton: Locator;
   32 |     readonly fullFledgedText: Locator;
   33 |
   34 |     constructor(page: Page) {
   35 |         this.page = page;
   36 |         this.slider = page.locator('#slider');
   37 |         this.homeLink = page.locator('a[href="/"]');
   38 |         this.productsLink = page.locator('a[href="/products"]');
   39 |         this.cartLink = page.locator('.shop-menu a[href="/view_cart"]');
   40 |         this.signupLoginLink = page.locator('a:has-text("Signup")');
   41 |         this.testCasesLink = page.locator('a.test_cases_list[href="/test_cases"]');
   42 |         this.apiTestingLink = page.locator('a[href="/api_testing"]');
   43 |         this.videoTutorialsLink = page.locator('a[href="https://www.youtube.com/c/AutomationExercise"]');
   44 |         this.contactUsLink = page.locator('a[href="/contact_us"]');
   45 |         this.subscriptionText = page.locator('h2:has-text("Subscription")');
   46 |         this.subscriptionEmailInput = page.getByRole('textbox', { name: 'Your email address' })
   47 |         this.subscriptionButton = page.locator('#subscribe');
   48 |         this.successAlert = page.locator('.alert-success.alert', { hasText: 'You have been successfully subscribed!' }); // or whatever the correct selector is
   49 |         this.womenCategoryLink = page.locator("a[href='#Women']");
   50 |         this.womenDressCategoryLink = page.locator("a[href='/category_products/1']");
   51 |         this.menCategoryLink = page.locator("a[href='#Men']");
   52 |         this.menTshirtsCategoryLink = page.locator("a[href='/category_products/3']");
   53 |         this.categoryView = page.locator(".left-sidebar h2:has-text('Category')");
   54 |         this.recommendedItemsSection = page.locator('.recommended_items');
   55 |         this.addedModal = page.locator('.modal-content');
   56 |         this.viewCartLinkInModal = page.locator('.modal-body a[href="/view_cart"]');
   57 |         // this.deleteAccountLink = page.locator('a[href="/delete_account"]');
   58 |         this.deleteAccountLink = page.getByRole('link', { name: 'Delete Account' });
   59 |         this.logoutLink = page.locator('a[href="/logout"]');
   60 |         this.accountDeletedText = page.locator('h2[data-qa="account-deleted"]');
   61 |         this.deleteContinueButton = page.locator('a[data-qa="continue-button"]');
   62 |         this.scrollUpArrowButton = page.locator('#scrollUp');
   63 |         this.fullFledgedText = page.locator('//div[@class="item active"]//h2[contains(text(),"Full-Fledged practice website")]');
   64 |     }
   65 |
   66 |     // Get all currently active recommended item cards
   67 |     private getActiveRecommendedItemCards(): Locator {
   68 |         // Assuming recommended items are within an active carousel slide, and each product is in a 'col-sm-4'
   69 |         // This might need adjustment if the structure is different (e.g. no 'col-sm-4' or if '.item.active' is not the direct parent)
   70 |         return this.recommendedItemsSection.locator('.item.active .single-products'); // .single-products is a common wrapper too.
   71 |     }
   72 |
   73 |     // Returns a Locator for the name of a specific recommended item by its display index
   74 |     getRecommendedItemNameLocator(index: number): Locator {
   75 |         // Assuming the name is the first direct child <p> of .productinfo
   76 |         return this.getActiveRecommendedItemCards().nth(index).locator('.productinfo > p').first();
   77 |     }
   78 |
   79 |     // Returns a Locator for the add-to-cart button of a specific recommended item
   80 |     getRecommendedItemAddToCartButtonLocator(index: number): Locator {
   81 |         // Targeting the add-to-cart button within productinfo (not the overlay one for recommended items usually)
   82 |         return this.getActiveRecommendedItemCards().nth(index).locator('.productinfo a.add-to-cart');
   83 |     }
   84 |
   85 |     loggedInAsTextSelector(username: string): string { // Renamed for clarity
   86 |         return `li a:has-text('Logged in as ${username}')`;
   87 |     }
   88 |
   89 |     async goto(): Promise<void> {
>  90 |         await this.page.goto('https://automationexercise.com/');
      |                         ^ Error: page.goto: Target page, context or browser has been closed
   91 |     }
   92 |
   93 |     async clickSignupLoginLink(): Promise<void> {
   94 |         // Wait for the link to be visible and enabled before clicking
   95 |         await this.signupLoginLink.waitFor({ state: 'visible', timeout: 10000 });
   96 |         await expect(this.signupLoginLink).toBeEnabled({ timeout: 5000 });
   97 |         await this.signupLoginLink.click();
   98 |     }
   99 |
  100 |     async clickProductsLink(): Promise<void> {
  101 |         await this.productsLink.click();
  102 |     }
  103 |
  104 |     async clickCartLink(): Promise<void> {
  105 |         await this.cartLink.click();
  106 |     }
  107 |
  108 |     async clickTestCasesLink(): Promise<void> {
  109 |         await this.testCasesLink.first().click();
  110 |     }
  111 |
  112 |     async clickContactUsLink(): Promise<void> {
  113 |         await this.contactUsLink.click();
  114 |     }
  115 |
  116 |     async enterSubscriptionEmail(email: string): Promise<void> {
  117 |         await this.subscriptionEmailInput.fill(email);
  118 |     }
  119 |
  120 |     async clickSubscriptionButton(): Promise<void> {
  121 |         await this.subscriptionButton.click();
  122 |     }
  123 |
  124 |     async getSuccessSubscriptionMessage(): Promise<string | null> {
  125 |         return await this.successAlert.textContent();
  126 |     }
  127 |
  128 |     async subscribeToNewsletter(email: string): Promise<void> {
  129 |         const footerLocator = this.page.locator('footer'); // Assuming footer contains the subscription form
  130 |         await footerLocator.waitFor({ state: 'visible', timeout: 7000 });
  131 |
  132 |         await this.subscriptionText.scrollIntoViewIfNeeded(); 
  133 |         await this.subscriptionText.waitFor({ state: 'visible', timeout: 7000 }); 
  134 |
  135 |         await this.subscriptionEmailInput.waitFor({ state: 'visible', timeout: 7000 }); 
  136 |         await expect(this.subscriptionEmailInput).toBeEnabled({ timeout: 3000 });
  137 |         await this.subscriptionEmailInput.fill(email);
  138 |         await this.subscriptionButton.click();
  139 |     }
  140 |
  141 |     async isSliderVisible(): Promise<boolean> {
  142 |         return await this.slider.isVisible();
  143 |     }
  144 |
  145 |     async areCategoriesVisible(): Promise<boolean> {
  146 |         return await this.categoryView.isVisible();
  147 |     }
  148 |
  149 |     async clickWomenCategoryLink(): Promise<void> {
  150 |         await this.womenCategoryLink.click();
  151 |     }
  152 |
  153 |     async clickWomenDressCategoryLink(): Promise<void> {
  154 |         await this.womenDressCategoryLink.click();
  155 |     }
  156 |
  157 |     async clickMenCategoryLink(): Promise<void> {
  158 |         await this.menCategoryLink.click();
  159 |     }
  160 |
  161 |     async clickMenTshirtsCategoryLink(): Promise<void> {
  162 |         await this.menTshirtsCategoryLink.click();
  163 |     }
  164 |
  165 |     async scrollToBottom(): Promise<void> {
  166 |         await this.page.evaluate(() => window.scrollTo(0, document.body.scrollHeight));
  167 |     }
  168 |
  169 |     async isRecommendedItemsVisible(): Promise<boolean> {
  170 |         const recommendedItems = this.recommendedItemsSection; // Use the Locator property
  171 |         await recommendedItems.scrollIntoViewIfNeeded();
  172 |         return await recommendedItems.isVisible();
  173 |     }
  174 |
  175 |     async getRecommendedItemName(index: number): Promise<string | null> {
  176 |         return await this.getRecommendedItemNameLocator(index).textContent();
  177 |     }
  178 |
  179 |     async addRecommendedItemToCart(index: number): Promise<string | null> {
  180 |         const itemName = await this.getRecommendedItemName(index);
  181 |         await this.getRecommendedItemAddToCartButtonLocator(index).click();
  182 |         await this.addedModal.waitFor({ state: 'visible', timeout: 5000 });
  183 |         return itemName;
  184 |     }
  185 |
  186 |     async clickViewCartModalLink(): Promise<void> {
  187 |         await this.addedModal.waitFor({ state: 'visible', timeout: 5000 });
  188 |         await this.viewCartLinkInModal.click();
  189 |         await this.addedModal.waitFor({ state: 'hidden', timeout: 5000 });
  190 |     }
```